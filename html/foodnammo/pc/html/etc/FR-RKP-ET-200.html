
<!DOCTYPE html>
<html lang="ko" xml:lang="ko">
<head>
<meta charset="utf-8">
<!-- include js 
	 상세 html 마크업 가이드 : html/_layout/layout_guide.html 참조
-->
<script src="../../_inc/pb_guide_include.js"></script>
<script>include.meta();</script>
<!-- ======================== CSS / JS ======================== -->
<script>include.styles();</script>
<script>include.scripts();</script>
<!--// ======================== CSS / JS ======================== -->
<script>include.title();</script>
</head>   

<body>
<div class="wrap">
	<!-- ========== 공통 헤더 :: header ========== -->
	<script>include.skipNav();</script>
	<header id="header" class="header">
		<script>include.header();</script>
	</header>
	<!--// ========== 공통 헤더 :: header ========== -->

	<!-- ========== 컨텐츠 영역 :: container ========== -->
	<section id="contents" class="container">
       
		<div class="content-wrap frame-sm">
			<div class="page-head">
				<div class="title-area">
					<h2 class="tit">최근 본 상품</h2>
				</div><!--// title-area -->
			</div><!--// page-head -->
			
			<div class="grid-list-wrap type-photo ui-compare-select">
				<div class="sorting-head">
                    <p class="total"><span class="text-primary">총 3개</span></p>
                    <div class="right-func-div">
						<button type="button" class="btn-link-txt5"><i class="ico-btn-delete"></i><span>전체삭제</span></button>
                    </div><!--// right-func-div -->
                </div>
				<ul class="prd-item-list grid-area-span4 gap20">
					<li class="colum" data-list="1">
						<div class="prd-item type-sm">
							<div class="img w256"><img src="../../images/_samples/@sample_260x260.png" alt="기획전 특가 상품 이미지"></div>
							<div class="desc-bottom">
								<p class="tit text-elps2">[맛있닭] 명실상부 판매1위! 닭가슴살 스테이크 &amp; 소스증정</p>
								<span class="price"><em class="num">13,900</em>원</span>
								<em class="imgbadge-dlv-exp"><span class="blind">특급배송</span></em>
								<div class="rating">
									<em class="rating-point"><span class="point4-5"></span><span class="blind">별점4.5</span></em>
									<!--
										<em class="rating-point"><span class="point0"></span><span class="blind">별점0</span></em>
										<em class="rating-point"><span class="point0-5"></span><span class="blind">별점0.5</span></em>
										<em class="rating-point"><span class="point1"></span><span class="blind">별점1</span></em>
										<em class="rating-point"><span class="point1-5"></span><span class="blind">별점1.5</span></em>
										<em class="rating-point"><span class="point2"></span><span class="blind">별점2</span></em>
										<em class="rating-point"><span class="point2-5"></span><span class="blind">별점2.5</span></em>
										<em class="rating-point"><span class="point3"></span><span class="blind">별점3</span></em>
										<em class="rating-point"><span class="point3-5"></span><span class="blind">별점3.5</span></em>
										<em class="rating-point"><span class="point4"></span><span class="blind">별점4</span></em>
										<em class="rating-point"><span class="point4-5"></span><span class="blind">별점4.5</span></em>
										<em class="rating-point"><span class="point5"></span><span class="blind">별점5</span></em>
									-->
									<span class="text-guide-sm">(1415)</span>
								</div>
							</div><!--// desc-bottom -->
							<div class="desc-form">
								<ul class="btns-list">
									<li>
										<button type="button" class="btn-icon-cart2" title="장바구니"><span class="blind">장바구니</span></button>
									</li>
									<li>
										<div class="custom-checkbox">
											<input type="checkbox" id="check-300" class="checkbox-wish" name="check-item-300"><label for="check-300" title="찜하기"><span class="blind">찜하기</span></label>
										</div>
									</li>
									<li>
										<button type="button" class="btn-icon-trash" title="삭제하기"><span class="blind">삭제하기</span></button>
									</li>
									<li>
										<button type="button" class="btn-rud-xs btn-default-ex ui-btn-compare"><span>비교담기</span></button>
									</li>
								</ul>
							</div><!--// desc-form -->
							<a href="#" class="btn-blank"><span class="blind">상품 자세히 보기</span></a>
						</div><!--// prd-item -->
					</li><!--// colum -->
					<li class="colum" data-list="2">
						<div class="prd-item type-sm">
							<div class="img w256"><img src="../../images/_samples/@sample_270x270.jpg" alt="기획전 특가 상품 이미지"></div>
							<div class="desc-bottom">
								<p class="tit text-elps2">[맛있닭] 명실상부 판매1위! 닭가슴살 스테이크 &amp; 소스증정</p>
								<span class="price"><em class="num">13,900</em>원</span>
								<em class="imgbadge-dlv-exp"><span class="blind">특급배송</span></em>
								<div class="rating">
									<em class="rating-point"><span class="point4-5"></span><span class="blind">별점4.5</span></em>
									<span class="text-guide-sm">(1415)</span>
								</div>
							</div><!--// desc-bottom -->
							<div class="desc-form">
								<ul class="btns-list">
									<li>
										<button type="button" class="btn-icon-cart2" title="장바구니"><span class="blind">장바구니</span></button>
									</li>
									<li>
										<div class="custom-checkbox">
											<input type="checkbox" id="check-301" class="checkbox-wish" name="check-item-300"><label for="check-301" title="찜하기"><span class="blind">찜하기</span></label>
										</div>
									</li>
									<li>
										<button type="button" class="btn-icon-trash" title="삭제하기"><span class="blind">삭제하기</span></button>
									</li>
									<li>
										<button type="button" class="btn-rud-xs btn-default-ex ui-btn-compare"><span>비교담기</span></button>
									</li>
								</ul>
							</div><!--// desc-form -->
							<a href="#" class="btn-blank"><span class="blind">상품 자세히 보기</span></a>
						</div><!--// prd-item -->
					</li><!--// colum -->
					<li class="colum" data-list="3">
						<div class="prd-item type-sm">
							<div class="img w256"><img src="../../images/_samples/@sample_260x260.png" alt="기획전 특가 상품 이미지"></div>
							<div class="desc-bottom">
								<p class="tit text-elps2">[맛있닭] 명실상부 판매1위!</p>
								<span class="price"><em class="num">13,900</em>원</span>
								<em class="imgbadge-dlv-exp"><span class="blind">특급배송</span></em>
								<div class="rating">
									<em class="rating-point"><span class="point4-5"></span><span class="blind">별점4.5</span></em>
									<span class="text-guide-sm">(1415)</span>
								</div>
							</div><!--// desc-bottom -->
							<div class="desc-form">
								<ul class="btns-list">
									<li>
										<button type="button" class="btn-icon-cart2" title="장바구니"><span class="blind">장바구니</span></button>
									</li>
									<li>
										<div class="custom-checkbox">
											<input type="checkbox" id="check-302" class="checkbox-wish" name="check-item-300"><label for="check-302" title="찜하기"><span class="blind">찜하기</span></label>
										</div>
									</li>
									<li>
										<button type="button" class="btn-icon-trash" title="삭제하기"><span class="blind">삭제하기</span></button>
									</li>
									<li>
										<button type="button" class="btn-rud-xs btn-default-ex ui-btn-compare"><span>비교담기</span></button>
									</li>
								</ul>
							</div><!--// desc-form -->
							<a href="#" class="btn-blank"><span class="blind">상품 자세히 보기</span></a>
						</div><!--// prd-item -->
					</li><!--// colum -->
					<li class="colum" data-list="4">
						<div class="prd-item type-sm">
							<div class="img w256"><img src="../../images/_samples/@sample_270x270.jpg" alt="기획전 특가 상품 이미지"></div>
							<div class="desc-bottom">
								<p class="tit text-elps2">[맛있닭] 명실상부 판매1위! 닭가슴살 스테이크 &amp; 소스증정</p>
								<span class="price"><em class="num">13,900</em>원</span>
								<em class="imgbadge-dlv-exp"><span class="blind">특급배송</span></em>
								<div class="rating">
									<em class="rating-point"><span class="point4-5"></span><span class="blind">별점4.5</span></em>
									<span class="text-guide-sm">(1415)</span>
								</div>
							</div><!--// desc-bottom -->
							<div class="desc-form">
								<ul class="btns-list">
									<li>
										<button type="button" class="btn-icon-cart2" title="장바구니"><span class="blind">장바구니</span></button>
									</li>
									<li>
										<div class="custom-checkbox">
											<input type="checkbox" id="check-303" class="checkbox-wish" name="check-item-300"><label for="check-303" title="찜하기"><span class="blind">찜하기</span></label>
										</div>
									</li>
									<li>
										<button type="button" class="btn-icon-trash" title="삭제하기"><span class="blind">삭제하기</span></button>
									</li>
									<li>
										<button type="button" class="btn-rud-xs btn-default-ex ui-btn-compare"><span>비교담기</span></button>
									</li>
								</ul>
							</div><!--// desc-form -->
							<a href="#" class="btn-blank"><span class="blind">상품 자세히 보기</span></a>
						</div><!--// prd-item -->
					</li><!--// colum -->
				</ul><!--// prd-item-list -->

				<!-- 데이터 없을 경우 -->
				<!-- <div class="no-data">
					<p class="message">최근 본 상품이 없습니다.</p>
				</div> -->
				<!--// 데이터 없을 경우 -->
			</div><!--// grid-list-wrap -->

		</div><!--// content-wrap -->
		
		 <!-- 비교하기 미니 팝업 -->
		 <div class="compare-layer-pop hide">
            <div class="inner-box">
                <ul class="compare-list">
                    
                </ul>
                <a href="#" class="btn-basic-lg2 btn-black btn-dim"><span>비교하기</span><i class="ico-arr-right"></i></a><!-- 비교항목 2개 이상일 경우 removeClass btn-dim -->
            </div><!--// inner-box -->
        </div><!--// compare-layer-pop -->
        <!--// 비교하기 미니 팝업 -->
		
	 </section>
	 <!--// ========== 컨텐츠 영역 :: container ========== -->
	
	<!-- ========== 공통 푸터 :: footer ========== -->
	<script>include.footer();</script>
	<!--// ========== 공통 푸터 :: footer ========== -->
</div><!--// wrap -->

<!-- ======================== 해당페이지에서만 사용되는 CSS / JS ======================== -->
<script>
    $(function () {
        var btn = $('.ui-btn-compare'); // 비교담기 버튼

        btn.on('click',function () {
            var btnAdd = $(this).hasClass('on');

			if ( !btnAdd ) {
				var itemLength = $('.ui-compare-select').find('li.selected').length 
				if ( itemLength < 3 ) {
					$(this).addClass('on').children('span').text('비교취소')
					$(this).parents('.colum').addClass('selected');

					openToastPop(itemLength + 1); // 토스트팝업으로 팝업에 담은 갯수 알림
                	compareAdd(this); // 선택한 항목 비교담기 팝업에 담기
				}
			} else if ( btnAdd ) {
				compareDel(this)
			}
            compareScrollFix () // 비교팝업 위치
        });

        $(document).on('click', '.ui-compare-del', function () {
            //  삭제
			compareDel(this)
        })
   }); 

    compareViewPop = $('.compare-layer-pop');
    compareList = compareViewPop.find('.compare-list');

    // 비교담기 팝업에 표시
    function compareAdd (el) {
        if ( !compareViewPop.is(':visible') ) {
            compareViewPop.removeClass('hide'); // 비교팝업 열림
        }

		var listNum = $(el).parents('li.selected').data('list');
        var imgSrc = $(el).parents('.desc-form').siblings('.img').find('img').attr('src');
        var imgList = '<li data-list="' + listNum + '"><img src="' + imgSrc + '" alt="제품이미지"><button type="button" class="btn-x-xs2 ui-compare-del"><i class="ico-x-white"></i><span class="blind">삭제</span></button></li>';

        if ( compareList.children('li').length < 3 ) {
            compareList.append(imgList);
        }

        // 항목 2개 이상일 경우 버튼 활성화
        compareActive ();
    }
	
	// 삭제
	function compareDel (el) {
		if ( !$(el).hasClass('ui-btn-compare') ) {
			var listValue = $(el).parent('li').data('list');
		} else {
			var listValue = $(el).parents('li.colum').data('list');
		}
		
		$('[data-list="' + listValue + '"]').removeClass('selected').find('.ui-btn-compare').removeClass('on').children('span').text('비교담기')
		compareList.find('[data-list="' + listValue + '"]').remove();

		compareActive ();

		if ( compareList.children('li').length === 0 ) {
            compareViewPop.addClass('hide')
        } 
	}

	// 항목 2개 이상일 경우 버튼 활성화
	function compareActive () {
        if ( compareList.children('li').length >= 2 ) {
            compareViewPop.find('.btn-black').removeClass('btn-dim')
        } else if ( compareList.children('li').length < 2 ) {
			compareViewPop.find('.btn-black').addClass('btn-dim')
		} 
	}

	function openToastPop (num) {
		containerWrap = $('.container');
		containerWrap.append('<div class="toast-pop"><div class="message"><p class="txt">' + num + '개의 비교 상품이 담겼습니다.</p><p class="sub-txt">(3개까지 비교가능)</p></div></div>')

		setTimeout(function () {
			closeToastPop ()
		},1000)
	}

</script>
<!-- ======================== 해당페이지에서만 사용되는 CSS / JS ======================== -->
</body>
</html>
